{% extends "blog/base.html" %}
{% load static %}

{% block content %}
<div class="container mx-auto p-4">
    <div class="max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold mb-4">
    {% if type == 'create' %} Create a New Post {% else %} Update Post {% endif %}
    
</h2>
<form method="POST" enctype="multipart/form-data" class="space-y-6 max-w-3xl">
    {% csrf_token %}
    {{ form.media }}  {# CKEditor JS/CSS #}

    <div>
        <label for="{{ form.title.id_for_label }}" class="block font-semibold mb-1">Title:</label>
        {{ form.title }}
        {% if form.title.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.title.errors.0 }}</p>
        {% endif %}
    </div>

    <div>
        <label for="{{ form.slug.id_for_label }}" class="block font-semibold mb-1">Slug:</label>
        {{ form.slug }}
        {% if form.slug.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.slug.errors.0 }}</p>
        {% endif %}
    </div>

    <div>
        <label for="{{ form.content.id_for_label }}" class="block font-semibold mb-1">Content:</label>
        {{ form.content }}
        {% if form.content.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.content.errors.0 }}</p>
        {% endif %}
    </div>

    <div>
        <label for="{{ form.featured_image.id_for_label }}" class="block font-semibold mb-1">Featured image:</label>
        {{ form.featured_image }}
        {% if form.featured_image.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.featured_image.errors.0 }}</p>
        {% endif %}
    </div>

    <div>
        <label for="{{ form.category.id_for_label }}" class="block font-semibold mb-1">Category:</label>
        {{ form.category }}
        {% if form.category.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.category.errors.0 }}</p>
        {% endif %}
    </div>

    <div>
        <label for="{{ form.new_category.id_for_label }}" class="block font-semibold mb-1">New Category:</label>
        {{ form.new_category }}
        <p class="text-sm text-gray-500">{{ form.new_category.help_text }}</p>
        {% if form.new_category.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.new_category.errors.0 }}</p>
        {% endif %}
    </div>

    <div class="flex items-center gap-2">
        {{ form.published }}
        <label for="{{ form.published.id_for_label }}" class="font-semibold">Publish now?</label>
        {% if form.published.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.published.errors.0 }}</p>
        {% endif %}
    </div>

    <button type="submit" class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700 transition">
        Publish
    </button>
</form>
    </div>
</div>
{% endblock %}
